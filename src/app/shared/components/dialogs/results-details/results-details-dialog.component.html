<div class="header-container">
  <h1>
    <span mat-dialog-title class="monospace">{{ data.result.testSuites[0]?.name }}</span>
  </h1>
  <button mat-icon-button (click)="closeDialog()" class="close-button">
    <mat-icon>close</mat-icon>
  </button>
</div>
<mat-dialog-content>
  <div
    *ngIf="data.result.testSuites[0]?.properties && data.result.testSuites[0]?.properties.length"
    class="properties-container"
  >
    <table class="nested-table">
      <tr *ngFor="let property of data.result.testSuites[0]?.properties">
        <td class="monospace">
          <strong>{{ property.name }}:</strong>
        </td>
        <td class="monospace">{{ property.value }}</td>
      </tr>
    </table>
  </div>
  <div class="dialog-content">
    <table mat-table [dataSource]="data.result.testSuites[0].testCases" class="results-table">
      <ng-container matColumnDef="caseName">
        <th mat-header-cell *matHeaderCellDef>Test Case</th>
        <td mat-cell *matCellDef="let testCase" class="monospace">{{ testCase.name }}</td>
      </ng-container>
      <ng-container matColumnDef="caseTime">
        <th mat-header-cell *matHeaderCellDef>Time</th>
        <td mat-cell *matCellDef="let testCase">{{ testCase.time }}s</td>
      </ng-container>
      <ng-container matColumnDef="caseStatus">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let testCase">
          <span
            [ngClass]="{
              passed: testCase.status === 'pass',
              failed: testCase.status === 'fail',
              error: testCase.status === 'error',
              skipped: testCase.status === 'skipped',
            }"
          >
            <mat-icon class="status-icon" *ngIf="testCase.status === 'pass'">check_circle</mat-icon>
            <mat-icon class="status-icon" *ngIf="testCase.status === 'fail'">cancel</mat-icon>
            <mat-icon class="status-icon" *ngIf="testCase.status === 'error'">error</mat-icon>
            <mat-icon class="status-icon" *ngIf="testCase.status === 'skipped'">remove_circle</mat-icon>
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="details">
        <th mat-header-cell *matHeaderCellDef>Details</th>
        <td mat-cell *matCellDef="let testCase">
          <button mat-icon-button (click)="openTestCaseDialog(testCase)">
            <mat-icon>info_outline</mat-icon>
          </button>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="['caseName', 'caseTime', 'caseStatus', 'details']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['caseName', 'caseTime', 'caseStatus', 'details']"></tr>
    </table>
  </div>
</mat-dialog-content>

<div tabindex="-1" cdkFocusInitial></div>
