<div class="header-container">
  <h1>
    <span mat-dialog-title class="monospace">{{ data.result.testSuites[0]?.name }}</span>
  </h1>
  <button mat-icon-button (click)="closeDialog()" class="close-button">
    <mat-icon>close</mat-icon>
  </button>
</div>
<mat-dialog-content>
  <div class="details-container">
    <div class="left-column">
      <app-suite-case-details-table [data]="data.result.testSuites[0]"></app-suite-case-details-table>
      <app-properties-table [properties]="data.result.testSuites[0]?.properties"></app-properties-table>
    </div>
    <div class="right-column">
      <app-test-suite-bar-chart [testSuite]="data.result.testSuites[0]"></app-test-suite-bar-chart>
    </div>
  </div>
  <div class="dialog-content">
    <table mat-table [dataSource]="data.result.testSuites[0].testCases" class="results-table">
      <ng-container matColumnDef="caseName">
        <th mat-header-cell *matHeaderCellDef>Test Case</th>
        <td mat-cell *matCellDef="let testCase" class="monospace">{{ testCase.name }}</td>
      </ng-container>
      <ng-container matColumnDef="caseTime">
        <th mat-header-cell *matHeaderCellDef>Time</th>
        <td mat-cell *matCellDef="let testCase">{{ testCase.time }}s</td>
      </ng-container>
      <ng-container matColumnDef="caseStatus">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let testCase">
          <span
            [ngClass]="{
              passed: testCase.status === 'pass',
              failed: testCase.status === 'fail',
              error: testCase.status === 'error',
              skipped: testCase.status === 'skipped',
            }"
          >
            <mat-icon class="status-icon" *ngIf="testCase.status === 'pass'" matTooltip="Passed">
              check_circle
            </mat-icon>
            <mat-icon class="status-icon" *ngIf="testCase.status === 'fail'" matTooltip="Failed"> cancel </mat-icon>
            <mat-icon class="status-icon" *ngIf="testCase.status === 'error'" matTooltip="Error"> error </mat-icon>
            <mat-icon class="status-icon" *ngIf="testCase.status === 'skipped'" matTooltip="Skipped">
              remove_circle
            </mat-icon>
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="details">
        <th mat-header-cell *matHeaderCellDef>Details</th>
        <td mat-cell *matCellDef="let testCase">
          <button mat-icon-button (click)="openTestCaseDialog(testCase)">
            <mat-icon>info_outline</mat-icon>
          </button>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="['caseName', 'caseTime', 'caseStatus', 'details']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['caseName', 'caseTime', 'caseStatus', 'details']"></tr>
    </table>
  </div>
</mat-dialog-content>
