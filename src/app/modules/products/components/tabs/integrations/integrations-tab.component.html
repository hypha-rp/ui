<table mat-table [dataSource]="integrations" class="mat-elevation-z8">
  <!-- Integration ID Column -->
  <ng-container matColumnDef="integrationID">
    <th mat-header-cell *matHeaderCellDef>Integration ID</th>
    <td mat-cell *matCellDef="let integration">
      <div class="id-container">
        <span class="id-value monospace">{{ integration.id | slice: 0 : 8 }}</span>
        <button mat-icon-button class="small-icon-button" (click)="copyToClipboard(integration.id, $event)">
          <mat-icon>content_copy</mat-icon>
        </button>
      </div>
    </td>
  </ng-container>
  <!-- Product ID Column -->
  <ng-container matColumnDef="productID">
    <th mat-header-cell *matHeaderCellDef>Product ID</th>
    <td mat-cell *matCellDef="let integration">
      <div class="id-container">
        <span class="id-value monospace">{{
          integration.productID1 === product.id
            ? (integration.productID2 | slice: 0 : 8)
            : (integration.productID1 | slice: 0 : 8)
        }}</span>
        <button
          mat-icon-button
          class="small-icon-button"
          (click)="
            copyToClipboard(
              integration.productID1 === product.id ? integration.productID2 : integration.productID1,
              $event
            )
          "
        >
          <mat-icon>content_copy</mat-icon>
        </button>
      </div>
    </td>
  </ng-container>
  <!-- Full Name Column -->
  <ng-container matColumnDef="fullName">
    <th mat-header-cell *matHeaderCellDef>Full Name</th>
    <td mat-cell *matCellDef="let integration">
      {{ integration.productID1 === product.id ? integration.Product2.fullName : integration.Product1.fullName }}
    </td>
  </ng-container>
  <!-- Short Name Column -->
  <ng-container matColumnDef="shortName">
    <th mat-header-cell *matHeaderCellDef>Short Name</th>
    <td mat-cell *matCellDef="let integration">
      {{ integration.productID1 === product.id ? integration.Product2.shortName : integration.Product1.shortName }}
    </td>
  </ng-container>
  <!-- Contact Email Column -->
  <ng-container matColumnDef="contactEmail">
    <th mat-header-cell *matHeaderCellDef>Contact Email</th>
    <td mat-cell *matCellDef="let integration">
      {{
        integration.productID1 === product.id ? integration.Product2.contactEmail : integration.Product1.contactEmail
      }}
    </td>
  </ng-container>
  <!-- Header and Row Declarations -->
  <tr mat-header-row *matHeaderRowDef="['integrationID', 'productID', 'fullName', 'shortName', 'contactEmail']"></tr>
  <tr
    mat-row
    *matRowDef="let row; columns: ['integrationID', 'productID', 'fullName', 'shortName', 'contactEmail']"
    (click)="openIntegrationDetails(row)"
  ></tr>
</table>

<div class="button-container">
  <button mat-fab color="primary" (click)="openNewIntegrationDialog()">
    <mat-icon>add</mat-icon>
  </button>
</div>
